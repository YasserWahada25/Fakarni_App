<section class="profile-section section-padding">
    <div class="container profile-container">
        <div class="profile-box">
            <h2>Edit profile</h2>
            <p>Update your information below.</p>

            @if (loadingUser) {
                <p class="profile-loading">Loading...</p>
            } @else {
                @if (errorMessage) {
                    <p class="auth-error">{{ errorMessage }}</p>
                }
                <form class="auth-form" [formGroup]="profileForm" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <label for="nom">Nom</label>
                        <input id="nom" type="text" formControlName="nom" placeholder="Votre nom">
                    </div>
                    <div class="form-group">
                        <label for="prenom">Prénom</label>
                        <input id="prenom" type="text" formControlName="prenom" placeholder="Votre prénom">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input id="email" type="email" formControlName="email" placeholder="votre@email.com">
                    </div>
                    <div class="form-group">
                        <label for="role">Rôle</label>
                        <select id="role" formControlName="role">
                            @for (opt of roleOptions; track opt.value) {
                                <option [value]="opt.value">{{ opt.label }}</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="numTel">Numéro de téléphone</label>
                        <input id="numTel" type="tel" formControlName="numTel" placeholder="Ex: 06 12 34 56 78">
                    </div>
                    <div class="form-group">
                        <label for="adresse">Adresse</label>
                        <input id="adresse" type="text" formControlName="adresse" placeholder="Votre adresse">
                    </div>

                    <div class="form-actions-inline">
                        <button type="button" class="btn btn-outline" routerLink="/home">Cancel</button>
                        <button type="submit" class="btn btn-primary" [disabled]="profileForm.invalid || loading">
                            {{ loading ? 'Saving...' : 'Save' }}
                        </button>
                    </div>
                </form>
            }
        </div>
    </div>
</section>
