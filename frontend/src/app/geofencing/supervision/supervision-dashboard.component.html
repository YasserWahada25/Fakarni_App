<div class="dashboard-container">
    <div class="dashboard-header">
        <h1><i class="fa-solid fa-chart-line"></i> Supervision & Statistics</h1>
        <button class="export-btn" (click)="exportReport()">
            <i class="fa-solid fa-file-pdf"></i> Export Report
        </button>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="icon-bg blue"><i class="fa-solid fa-users-viewfinder"></i></div>
            <div class="stat-info">
                <h3>{{ stats.activeMonitoring }}</h3>
                <p>Active Patients</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="icon-bg green"><i class="fa-solid fa-shield-heart"></i></div>
            <div class="stat-info">
                <h3>{{ stats.safePatients }}</h3>
                <p>In Safe Zones</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="icon-bg orange"><i class="fa-solid fa-triangle-exclamation"></i></div>
            <div class="stat-info">
                <h3>{{ stats.riskWarnings }}</h3>
                <p>Active Warnings</p>
            </div>
        </div>
        <div class="stat-card">
            <div class="icon-bg purple"><i class="fa-solid fa-bell"></i></div>
            <div class="stat-info">
                <h3>{{ stats.totalAlerts24h }}</h3>
                <p>Alerts (24h)</p>
            </div>
        </div>
    </div>

    <div class="charts-grid">
        <!-- Zone Safety Table -->
        <div class="chart-card zone-analysis">
            <h3>Zone Safety Analysis</h3>
            <table class="zone-table">
                <thead>
                    <tr>
                        <th>Zone Name</th>
                        <th>Safety Score</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let zone of zones">
                        <td>{{ zone.name }}</td>
                        <td>
                            <div class="progress-bar-container">
                                <div class="progress-bar" [style.width.%]="zone.safetyScore"
                                    [class.high]="zone.safetyScore > 80"
                                    [class.med]="zone.safetyScore > 50 && zone.safetyScore <= 80"
                                    [class.low]="zone.safetyScore <= 50">
                                </div>
                                <span>{{ zone.safetyScore }}%</span>
                            </div>
                        </td>
                        <td>
                            <span class="status-dot" [ngClass]="zone.status.toLowerCase()"></span> {{ zone.status }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Activity Chart (CSS Bar Chart) -->
        <div class="chart-card activity-chart">
            <h3>Patient Activity Levels</h3>
            <div class="bar-chart">
                <div class="bar-item" *ngFor="let data of activityData">
                    <div class="bar" [style.height.%]="data.level">
                        <span class="tooltip">{{ data.level }}%</span>
                    </div>
                    <span class="label">{{ data.hour }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Security Map Visual Mockup -->
    <div class="security-map-section">
        <h3><i class="fa-solid fa-map"></i> Zone Risk Overview</h3>
        <div class="risk-map-mockup">
            <div class="map-overlay">
                <div class="zone-indicator safe" style="top: 30%; left: 40%">Safe</div>
                <div class="zone-indicator risk" style="top: 60%; left: 70%">Risk</div>
            </div>
        </div>
    </div>
</div>