<h2 mat-dialog-title>{{isEditMode ? 'Modifier' : 'Ajouter'}} une Zone Géographique</h2>

<mat-dialog-content>
    <form [formGroup]="zoneForm">
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nom de la zone</mat-label>
            <input matInput formControlName="name" placeholder="Ex: Domicile, Centre de jour">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Type de zone</mat-label>
            <mat-select formControlName="type">
                <mat-option *ngFor="let type of zoneTypes" [value]="type.value">
                    {{type.label}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Patients assignés</mat-label>
            <mat-select formControlName="patientIds" multiple>
                <mat-option *ngFor="let patient of patients" [value]="patient.id">
                    {{patient.firstName}} {{patient.lastName}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <div class="coordinates-grid">
            <mat-form-field appearance="outline">
                <mat-label>Latitude</mat-label>
                <input matInput type="number" formControlName="latitude" step="0.0001">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Longitude</mat-label>
                <input matInput type="number" formControlName="longitude" step="0.0001">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Rayon (mètres)</mat-label>
                <input matInput type="number" formControlName="radius">
            </mat-form-field>
        </div>

        <div class="toggles">
            <mat-slide-toggle formControlName="isActive">Zone active</mat-slide-toggle>
            <mat-slide-toggle formControlName="notifyOnExit">Notifier en cas de sortie</mat-slide-toggle>
        </div>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Annuler</button>
    <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="!zoneForm.valid">
        {{isEditMode ? 'Modifier' : 'Créer'}}
    </button>
</mat-dialog-actions>